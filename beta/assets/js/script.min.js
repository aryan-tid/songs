const audio=document.querySelector(".audio-file audio"),playPauseBtn=document.querySelector(".play-pause-btn"),playPauseBtn1=document.querySelector(".play-pause-btn1"),currentTimeElement=document.querySelector(".currentTime"),totalTimeElement=document.querySelector(".totalTime"),currentTimeElement1=document.querySelector(".currentTime1"),totalTimeElement1=document.querySelector(".totalTime1"),progressBar=document.querySelector(".progress12"),progressBarContainer=document.querySelector(".progress-bar12"),progressBar1=document.querySelector(".progress123"),progressBarContainer1=document.querySelector(".progress-bar123"),expandPlayer=document.querySelector(".expand-player"),unexpandPlayer=document.querySelector(".unexpand-player"),audioPlayer1=document.querySelector(".audio-player11"),playIcon='<i class="fas fa-play"></i>',pauseIcon='<i class="fas fa-pause"></i>',volumeSlider=document.getElementById("volumeSlider"),volumeLevel=document.getElementById("volumeLevel"),loopElement=document.querySelector(".loop-btn");let loop=!1;function playAudio(e){audio.src=e}function formatTime(e){const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n<10?"0":""}${n}`}function audio1(e){"play"===e?(audio.play(),playPauseBtn.innerHTML=pauseIcon,playPauseBtn1.innerHTML=pauseIcon):"pause"===e&&(audio.pause(),playPauseBtn.innerHTML=playIcon,playPauseBtn1.innerHTML=playIcon)}function seekForward(){audio.currentTime=Math.min(audio.duration,audio.currentTime+10)}function seekBackward(){audio.currentTime=Math.max(0,audio.currentTime-10)}async function callMediaSession(e,t){const n=e||"https://aryantidke.me/songs/logo.png";if("mediaSession"in navigator){if(navigator.mediaSession.metadata=new MediaMetadata({title:t.replace(/&quot;/g," "),artwork:[{src:n,sizes:"512x512",type:"image/png"}]}),!audio.src)return void console.error("No audio source found. MediaSession might not work.");function a(){audio.paused?(audio.play(),playPauseBtn.innerHTML=pauseIcon):(audio.pause(),playPauseBtn.innerHTML=playIcon)}function o(e){const t=playlistSongUrl[e],n=playlistSongName[e],a=playlistSongImg[e],o=playlistSongArtist[e];playInPlayer(n,t,a,o),showSongQueueNew()}try{navigator.mediaSession.setActionHandler("play",a),navigator.mediaSession.setActionHandler("pause",a),navigator.mediaSession.setActionHandler("seekbackward",(function(){audio.currentTime=Math.max(0,audio.currentTime-10)})),navigator.mediaSession.setActionHandler("seekforward",(function(){audio.currentTime=Math.min(audio.duration,audio.currentTime+10)})),navigator.mediaSession.setActionHandler("previoustrack",(function(){audio.currentTime>9?audio.currentTime=0:currentIndexPlaylist>0&&(currentIndexPlaylist--,o(currentIndexPlaylist))})),navigator.mediaSession.setActionHandler("nexttrack",(function(){currentIndexPlaylist<playlistSongUrl.length-1?(currentIndexPlaylist++,o(currentIndexPlaylist)):showMessage("Last song in Queue","negative")})),navigator.mediaSession.setActionHandler("stop",a)}catch(e){console.warn("Media Session API handlers not supported:",e)}}}function setVolume(e){const t=volumeSlider.clientWidth,n=e.offsetX/t;audio.volume=n,volumeLevel.style.width=100*n+"%"}loopElement.addEventListener("click",(function(){loop=!loop,loop?(loopElement.style.backgroundColor="#2d8f7a",loopElement.style.color="#f8f9fa"):(loopElement.style.backgroundColor="#f8f9fa",loopElement.style.color="#000000")})),playAudio("https://aac.saavncdn.com/179/072d8e825c532778560b38b4042c8fc3_320.mp4"),audio.addEventListener("loadedmetadata",(function(){totalTimeElement.textContent=formatTime(audio.duration),totalTimeElement1.textContent=formatTime(audio.duration)})),playPauseBtn.addEventListener("click",(function(){audio.paused?(audio1("play"),callMediaSession()):audio1("pause")})),playPauseBtn1.addEventListener("click",(function(){audio.paused?audio1("play"):audio1("pause")})),audio.addEventListener("ended",(function(){loop?(audio.currentTime=0,audio.play()):(playPauseBtn1.innerHTML=playIcon,playPauseBtn.innerHTML=playIcon)})),audio.addEventListener("timeupdate",(function(){currentTimeElement.textContent=formatTime(audio.currentTime),currentTimeElement1.textContent=formatTime(audio.currentTime)})),audio.addEventListener("timeupdate",(function(){const e=audio.currentTime/audio.duration*100;progressBar.style.width=e+"%"})),progressBarContainer.addEventListener("click",(function(e){const t=progressBarContainer.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*100/100*audio.duration;audio.currentTime=n})),audio.addEventListener("timeupdate",(function(){const e=audio.currentTime/audio.duration*100;progressBar1.style.width=e+"%"})),progressBarContainer1.addEventListener("click",(function(e){const t=progressBarContainer1.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*100/100*audio.duration;audio.currentTime=n})),document.addEventListener("keydown",(function(e){const t=document.activeElement;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName)switch(e.code){case"Space":e.preventDefault(),audio.paused?audio1("play"):audio1("pause");break;case"ArrowRight":e.preventDefault(),seekForward();break;case"ArrowLeft":e.preventDefault(),seekBackward()}})),expandPlayer.addEventListener("click",(function(){audioPlayer1.classList.toggle("hidden")})),unexpandPlayer.addEventListener("click",(function(){audioPlayer1.classList.toggle("hidden")}));let isDragging=!1;function updateVolume(e){const t=volumeSlider.clientWidth;let n=e.offsetX||e.touches?.[0]?.clientX-volumeSlider.getBoundingClientRect().left,a=Math.max(0,Math.min(1,n/t));audio.volume=a,volumeLevel.style.width=100*a+"%"}function updateVolumeUI(){volumeLevel.style.width=100*audio.volume+"%"}volumeSlider.addEventListener("mousedown",(e=>{isDragging=!0,updateVolume(e)})),document.addEventListener("mousemove",(e=>{isDragging&&updateVolume(e)})),document.addEventListener("mouseup",(()=>{isDragging=!1})),volumeSlider.addEventListener("touchstart",(e=>{isDragging=!0,updateVolume(e)})),document.addEventListener("touchmove",(e=>{isDragging&&updateVolume(e)})),document.addEventListener("touchend",(()=>{isDragging=!1})),audio.addEventListener("volumechange",(()=>{volumeLevel.style.width=100*audio.volume+"%"})),volumeLevel.style.width=100*audio.volume+"%",volumeSlider.addEventListener("click",setVolume),audio.addEventListener("volumechange",updateVolumeUI),updateVolumeUI();